<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Radar Bandar - Realtime Stock Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        bgPrimary: '#0f1419',
                        bgSecondary: '#16181d',
                        bgCard: '#1a1d23',
                        bgHover: '#22252b',
                        borderColor: '#2f3339',
                        textPrimary: '#e7e9ea',
                        textSecondary: '#8b949e',
                        textMuted: '#6e7681',
                        accentSuccess: '#0ecb81',
                        accentDanger: '#f6465d',
                        accentWarning: '#ffa500',
                        accentInfo: '#3b82f6',
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer components {
      .btn-primary {
        @apply px-3 py-1.5 bg-accentInfo text-white rounded-lg hover:bg-blue-600 transition-colors duration-200 font-semibold text-xs flex items-center gap-2 justify-center;
      }
      .btn-secondary {
        @apply px-3 py-1.5 bg-bgHover text-textPrimary border border-borderColor rounded-lg hover:bg-borderColor transition-colors duration-200 font-semibold text-xs flex items-center gap-2 justify-center;
      }
      .input-base {
        @apply bg-bgCard border border-borderColor text-textPrimary px-2 py-1.5 rounded-lg font-sans text-xs focus:outline-none focus:border-accentInfo focus:ring-1 focus:ring-accentInfo transition-all duration-200;
      }
      .card-base {
        @apply bg-bgCard border border-borderColor rounded-xl p-3 mb-2 overflow-hidden shadow-sm;
      }
      .table-header {
        @apply px-4 py-3 text-left font-semibold text-xs text-textMuted uppercase tracking-wider bg-bgSecondary sticky top-0 z-10 border-b border-borderColor whitespace-nowrap;
      }
      .table-cell {
        @apply px-4 py-3 text-xs text-textPrimary border-t border-borderColor whitespace-nowrap align-middle;
      }
      .badge {
        @apply px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide inline-block;
      }
      
      /* Utility for toggling visibility */
      .show {
        display: block !important;
      }
      
      /* Mobile Filter Toggle */
      @media (max-width: 1023px) {
        #filter-content {
          display: none;
        }
        #filter-content.show {
          display: block;
          animation: slideDown 0.2s ease-out;
        }
      }
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        max-height: 0;
      }
      to {
        opacity: 1;
        max-height: 500px;
      }
    }

    /* Mobile Responsive Table Cards Removed - tables will scroll horizontally */
    
    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      @apply bg-bgSecondary;
    }
    ::-webkit-scrollbar-thumb {
      @apply bg-borderColor rounded hover:bg-textMuted transition-colors;
    }

    body {
        @apply bg-bgPrimary text-textPrimary font-sans antialiased;
    }
  </style>
    <style>
        .c-tab.active {
            color: rgb(56, 189, 248);
            /* text-accentInfo */
            border-bottom-color: rgb(56, 189, 248);
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="bg-bgSecondary border-b border-borderColor sticky top-0 z-50 backdrop-blur-md bg-opacity-90">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center gap-2">
                    <span class="text-2xl">üêã</span>
                    <span class="font-bold text-lg tracking-tight hidden sm:block">Radar Bandar</span>
                </div>

                <!-- Stats -->
                <div class="hidden md:flex flex-1 justify-center gap-8">
                    <div class="flex flex-col items-center">
                        <span class="text-xs font-semibold text-textMuted uppercase tracking-wider">Alerts</span>
                        <span class="text-base font-bold text-textPrimary" id="total-alerts">0</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="text-xs font-semibold text-textMuted uppercase tracking-wider">Tingkat
                            Menang</span>
                        <span class="text-base font-bold text-accentSuccess" id="global-win-rate">0%</span>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="text-xs font-semibold text-textMuted uppercase tracking-wider">Rata-rata
                            Profit</span>
                        <span class="text-base font-bold text-accentSuccess" id="global-avg-profit">0%</span>
                    </div>
                </div>

                <!-- Actions -->
                <div class="flex items-center gap-3">
                    <span id="market-regime"
                        class="hidden md:inline-block px-3 py-1 bg-bgCard border border-borderColor rounded text-xs font-bold tracking-wide"
                        style="display:none;">RANGING</span>
                    <button id="webhook-config-btn"
                        class="p-2 rounded-lg border border-borderColor hover:bg-bgHover transition-colors text-lg"
                        title="Webhook Config">üîî</button>
                    <button id="help-btn"
                        class="p-2 rounded-lg border border-borderColor hover:bg-bgHover transition-colors text-lg"
                        title="Help">‚ùì</button>
                    <div
                        class="flex items-center gap-2 px-3 py-1.5 bg-accentSuccess/10 border border-accentSuccess/20 rounded-lg text-accentSuccess text-sm font-semibold">
                        <span class="w-1.5 h-1.5 bg-accentSuccess rounded-full animate-pulse"></span>
                        <span>Live</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Filters -->
        <section class="mb-4 sm:mb-8">
            <!-- Mobile Toggle -->
            <button id="mobile-filter-toggle"
                class="w-full flex sm:hidden justify-between items-center p-4 bg-bgCard border border-borderColor rounded-xl mb-3">
                <span class="font-bold text-sm">üéõÔ∏è Filter & Pencarian</span>
                <span id="filter-toggle-icon" class="text-xs text-textMuted">‚ñº</span>
            </button>

            <!-- Filter Content -->
            <div id="filter-content" class="hidden sm:block">
                <div
                    class="flex flex-wrap gap-3 items-center bg-bgCard p-4 rounded-xl border border-borderColor shadow-sm">
                    <input type="text" id="search" class="input-base flex-1 min-w-[200px]"
                        placeholder="üîç Cari Kode Saham..." />

                    <select id="filter-action" class="input-base cursor-pointer">
                        <option value="ALL">Semua Aksi</option>
                        <option value="BUY">üü¢ Beli</option>
                        <option value="SELL">üî¥ Jual</option>
                    </select>

                    <select id="filter-amount" class="input-base cursor-pointer">
                        <option value="0">Semua Nilai</option>
                        <option value="100000000">Min 100 Jt</option>
                        <option value="500000000">Min 500 Jt</option>
                        <option value="1000000000">Min 1 M</option>
                    </select>

                    <select id="filter-board" class="input-base cursor-pointer">
                        <option value="ALL">Semua Board</option>
                        <option value="RG">Reguler</option>
                        <option value="TN">Tunai</option>
                        <option value="NG">Negosiasi</option>
                    </select>

                    <button id="clear-filters-btn" class="text-accentDanger text-sm hover:underline ml-2 hidden">
                        Reset
                    </button>
                    <button id="refresh-btn" class="btn-secondary ml-auto">
                        <span>üîÑ</span> Refresh
                    </button>
                </div>
            </div>
        </section>

        <!-- Grid Layout for Desktop -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- Running Trades (New) -->
            <section class="card-base lg:col-span-2">
                <div class="flex justify-between items-center mb-0">
                    <button id="toggle-running-trades" class="flex items-center gap-2 group w-full text-left">
                        <div>
                            <h2 class="text-sm font-bold mb-0.5 flex items-center gap-2">
                                <span id="running-trades-arrow" class="transition-transform duration-200">‚ñº</span>
                                ‚ö° Running Trade
                            </h2>
                            <p class="text-[10px] text-textSecondary ml-5">Real-time market feed</p>
                        </div>
                    </button>
                    <div class="text-[10px] font-mono text-textMuted flex-shrink-0" id="trade-stream-status">Wait...
                    </div>
                </div>

                <div id="running-trades-container"
                    class="mt-3 border border-borderColor rounded-lg overflow-hidden flex flex-col h-[300px] transition-all duration-300">
                    <div class="overflow-auto flex-1 table-wrapper custom-scrollbar">
                        <table class="w-full text-left min-w-[700px]" id="running-trades-table">
                            <thead class="bg-bgSecondary sticky top-0 z-10 w-full">
                                <tr>
                                    <th class="px-4 py-2 text-[10px] font-bold uppercase text-textMuted">Time</th>
                                    <th class="px-4 py-2 text-[10px] font-bold uppercase text-textMuted">Stock</th>
                                    <th class="px-4 py-2 text-[10px] font-bold uppercase text-textMuted text-right">
                                        Price</th>
                                    <th class="px-4 py-2 text-[10px] font-bold uppercase text-textMuted text-right">
                                        Vol(Lot)</th>
                                    <th class="px-4 py-2 text-[10px] font-bold uppercase text-textMuted text-right">
                                        Value</th>
                                    <th class="px-4 py-2 text-[10px] font-bold uppercase text-textMuted text-center">Act
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="running-trades-body" class="divide-y divide-borderColor font-mono text-xs">
                                <!-- Trades injected here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Whale Alerts Table -->
            <section class="card-base lg:col-span-2">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 gap-2">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">üêã Alert Bandar</h2>
                        <p class="text-[10px] text-textSecondary">Real-time whale transactions</p>
                    </div>
                </div>

                <div class="border border-borderColor rounded-lg overflow-hidden flex flex-col h-[500px]">
                    <div class="overflow-auto flex-1 table-wrapper">
                        <table class="w-full text-left border-collapse min-w-[800px]" id="alerts-table">
                            <thead class="bg-bgSecondary sticky top-0 left-0 right-0 z-10 w-full table-header-group">
                                <tr>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-left w-[10%]">
                                        Time</th>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-left w-[15%]">
                                        Stock</th>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-center w-[5%]">
                                        Act</th>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-right w-[12%]">
                                        Price</th>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-right w-[13%]">
                                        Val</th>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-right w-[10%]">
                                        Vol</th>
                                    <th
                                        class="px-2 py-1.5 text-[10px] font-bold uppercase text-textMuted text-left w-[35%]">
                                        Info</th>
                                </tr>
                            </thead>
                            <tbody id="alerts-table-body" class="divide-y divide-borderColor">
                                <!-- Rows injected here -->
                            </tbody>
                        </table>
                    </div>

                    <div id="loading" class="p-8 text-center text-textSecondary bg-bgCard border-t border-borderColor">
                        <div
                            class="animate-spin h-8 w-8 border-4 border-borderColor border-t-accentInfo rounded-full mx-auto mb-4">
                        </div>
                        <p>Loading alerts...</p>
                    </div>
                    <div id="loading-more"
                        class="p-4 text-center text-textSecondary text-sm border-t border-borderColor hidden bg-bgCard">
                        <div
                            class="inline-block animate-spin h-4 w-4 border-2 border-borderColor border-t-accentInfo rounded-full mr-2">
                        </div>
                        <span>Loading more...</span>
                    </div>
                    <div id="no-more-data"
                        class="p-4 text-center text-textMuted text-sm italic border-t border-borderColor hidden bg-bgCard">
                        <p>üìä All data loaded</p>
                    </div>
                </div>
            </section>

            <!-- Strategy Signals -->
            <section class="card-base">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">üéØ Strategi Trading</h2>
                        <p class="text-[10px] text-textSecondary">AI-powered trading signals</p>
                    </div>
                    <div
                        class="flex items-center gap-1 px-2 py-1 bg-bgSecondary border border-borderColor rounded text-[10px] font-semibold">
                        <span id="strategy-live-indicator"
                            class="w-1.5 h-1.5 rounded-full bg-accentSuccess animate-pulse"></span>
                        <span id="strategy-connection-status">Connecting...</span>
                    </div>
                </div>

                <div class="flex gap-2 mb-3 overflow-x-auto pb-1 border-b border-borderColor scrollbar-hide">
                    <button
                        class="px-2 py-1 text-xs font-semibold rounded hover:bg-bgHover text-textSecondary hover:text-textPrimary transition-colors strategy-tab active border-b-2 border-accentInfo"
                        data-strategy="ALL">Semua</button>
                    <button
                        class="px-2 py-1 text-xs font-semibold rounded hover:bg-bgHover text-textSecondary hover:text-textPrimary transition-colors strategy-tab"
                        data-strategy="VOLUME_BREAKOUT">üöÄ Volume</button>
                    <button
                        class="px-2 py-1 text-xs font-semibold rounded hover:bg-bgHover text-textSecondary hover:text-textPrimary transition-colors strategy-tab"
                        data-strategy="MEAN_REVERSION">‚Ü©Ô∏è Mean Rev</button>
                    <button
                        class="px-2 py-1 text-xs font-semibold rounded hover:bg-bgHover text-textSecondary hover:text-textPrimary transition-colors strategy-tab"
                        data-strategy="FAKEOUT_FILTER">üõ°Ô∏è Fakeout</button>
                    <button
                        class="px-2 py-1 text-xs font-semibold rounded hover:bg-bgHover text-textSecondary hover:text-textPrimary transition-colors strategy-tab"
                        data-strategy="HISTORY">üìú History</button>
                </div>

                <div class="border border-borderColor rounded-lg overflow-hidden flex flex-col h-[400px]">
                    <div class="overflow-auto flex-1 table-wrapper">
                        <table class="w-full text-left min-w-[700px]" id="signals-table">
                            <thead class="bg-bgSecondary sticky top-0 z-10 w-full table-header-group">
                                <tr>
                                    <th class="table-header">Waktu</th>
                                    <th class="table-header">Saham</th>
                                    <th class="table-header">Strategi</th>
                                    <th class="table-header">Aksi</th>
                                    <th class="table-header">Harga</th>
                                    <th class="table-header">Change</th>
                                    <th class="table-header">Result</th>
                                </tr>
                            </thead>
                            <tbody id="signals-table-body" class="divide-y divide-borderColor">
                                <!-- Rows will be injected here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="signals-loading"
                        class="p-8 text-center text-textSecondary hidden border-t border-borderColor bg-bgCard">
                        <div
                            class="animate-spin h-8 w-8 border-4 border-borderColor border-t-accentInfo rounded-full mx-auto mb-4">
                        </div>
                        <p>Loading signals...</p>
                    </div>
                    <div id="signals-loading-more"
                        class="p-4 text-center text-textSecondary text-sm border-t border-borderColor hidden bg-bgCard">
                        <div
                            class="inline-block animate-spin h-4 w-4 border-2 border-borderColor border-t-accentInfo rounded-full mr-2">
                        </div>
                        <span>Loading more...</span>
                    </div>
                    <div id="signals-no-more-data"
                        class="p-4 text-center text-textMuted text-sm italic border-t border-borderColor hidden bg-bgCard">
                        <p>üìä End of signals history</p>
                    </div>
                    <div id="signals-placeholder"
                        class="p-12 text-center text-textSecondary flex flex-col items-center justify-center h-full">
                        <span class="text-4xl block mb-3 opacity-50">üì°</span>
                        <p>Waiting for trading signals...</p>
                    </div>
                </div>
            </section>

            <!-- Running Positions -->
            <section class="card-base">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">üíº Posisi Aktif(Mock)</h2>
                        <p class="text-[10px] text-textSecondary">Active trading positions</p>
                    </div>
                </div>
                <div class="border border-borderColor rounded-lg overflow-hidden flex flex-col h-[400px]">
                    <div class="overflow-auto flex-1 table-wrapper">
                        <table class="w-full text-left min-w-[700px]" id="positions-table">
                            <thead class="bg-bgSecondary sticky top-0 z-10 w-full table-header-group">
                                <tr>
                                    <th class="table-header">Saham</th>
                                    <th class="table-header">Strategi</th>
                                    <th class="table-header">Entry Time</th>
                                    <th class="table-header text-right">Harga Masuk</th>
                                    <th class="table-header text-right">P&L %</th>
                                    <th class="table-header">Status</th>
                                </tr>
                            </thead>
                            <tbody id="positions-table-body" class="divide-y divide-borderColor">
                                <!-- Rows will be injected here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="positions-loading"
                        class="p-8 text-center text-textSecondary hidden border-t border-borderColor bg-bgCard">
                        <div
                            class="animate-spin h-8 w-8 border-4 border-borderColor border-t-accentInfo rounded-full mx-auto mb-4">
                        </div>
                        <p>Loading positions...</p>
                    </div>
                    <div id="positions-placeholder"
                        class="p-12 text-center text-textSecondary flex flex-col items-center justify-center h-full">
                        <span class="text-4xl block mb-3 opacity-50">üíº</span>
                        <p>No active positions</p>
                    </div>
                </div>
            </section>

            <!-- Position History -->
            <section class="card-base lg:col-span-2">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 gap-2">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">üìú Riwayat Trading(Mock)</h2>
                        <p class="text-[10px] text-textSecondary">Completed trade history</p>
                    </div>
                    <div class="flex flex-wrap gap-2">
                        <select id="history-strategy"
                            class="bg-bgSecondary border border-borderColor text-textPrimary text-xs rounded-lg px-2 py-1.5 focus:outline-none focus:border-accentInfo">
                            <option value="ALL">Semua Strategi</option>
                            <option value="VOLUME_BREAKOUT">Volume Breakout</option>
                            <option value="MEAN_REVERSION">Mean Reversion</option>
                            <option value="FAKEOUT_FILTER">Fakeout Filter</option>
                        </select>
                        <select id="history-status"
                            class="bg-bgSecondary border border-borderColor text-textPrimary text-xs rounded-lg px-2 py-1.5 focus:outline-none focus:border-accentInfo">
                            <option value="">Semua Status</option>
                            <option value="WIN">Win</option>
                            <option value="LOSS">Loss</option>
                        </select>
                        <select id="history-regime"
                            class="bg-bgSecondary border border-borderColor text-textPrimary text-xs rounded-lg px-2 py-1.5 focus:outline-none focus:border-accentInfo">
                            <option value="ALL">Semua Regime</option>
                            <option value="TRENDING_UP">üìà Trending Up</option>
                            <option value="TRENDING_DOWN">üìâ Trending Down</option>
                            <option value="RANGING">‚ÜîÔ∏è Ranging</option>
                            <option value="VOLATILE">‚ö° Volatile</option>
                        </select>
                        <button id="history-refresh-btn"
                            class="p-1.5 rounded-lg border border-borderColor hover:bg-bgHover transition-transform">
                            üîÑ
                        </button>
                        <!-- Missing limit select, but maybe it's fine without it for now unless specific logic needs it -->
                        <select id="history-limit" class="hidden">
                            <option value="20">20</option>
                        </select>
                    </div>
                </div>
                <div class="border border-borderColor rounded-lg overflow-hidden flex flex-col h-[400px]">
                    <div class="overflow-auto flex-1 table-wrapper">
                        <table class="w-full text-left min-w-[900px]" id="history-table">
                            <thead class="bg-bgSecondary sticky top-0 z-10 w-full table-header-group">
                                <tr>
                                    <th class="table-header">Saham</th>
                                    <th class="table-header">Strategi</th>
                                    <th class="table-header">Waktu</th>
                                    <th class="table-header text-right">Entry</th>
                                    <th class="table-header text-right">Exit</th>
                                    <th class="table-header text-right">P&L</th>
                                    <th class="table-header text-right">Duration</th>
                                    <th class="table-header">Status</th>
                                    <th class="table-header">Reason</th>
                                </tr>
                            </thead>
                            <tbody id="history-table-body" class="divide-y divide-borderColor">
                                <!-- Rows will be injected here -->
                            </tbody>
                        </table>
                    </div>
                    <div id="history-loading"
                        class="p-8 text-center text-textSecondary hidden border-t border-borderColor bg-bgCard">
                        <div
                            class="animate-spin h-8 w-8 border-4 border-borderColor border-t-accentInfo rounded-full mx-auto mb-4">
                        </div>
                        <p>Loading history...</p>
                    </div>
                    <!-- Loading More Indicator -->
                    <div id="history-loading-more"
                        class="p-4 text-center text-textSecondary text-sm border-t border-borderColor hidden bg-bgCard">
                        <div
                            class="inline-block animate-spin h-4 w-4 border-2 border-borderColor border-t-accentInfo rounded-full mr-2">
                        </div>
                        <span>Loading more...</span>
                    </div>
                    <div id="history-no-more-data"
                        class="p-4 text-center text-textMuted text-sm italic border-t border-borderColor hidden bg-bgCard">
                        <p>üìä End of history</p>
                    </div>
                    <div id="history-placeholder"
                        class="p-12 text-center text-textSecondary flex flex-col items-center justify-center h-full">
                        <span class="text-4xl block mb-3 opacity-50">üìú</span>
                        <p>No trading history</p>
                    </div>
                </div>
            </section>

            <!-- Accumulation/Distribution Summary -->
            <section class="card-base lg:col-span-2">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">üìä Aktivitas Bandar (24h)</h2>
                        <p class="text-[10px] text-textSecondary">Top whale activities</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Accumulation Table -->
                    <div>
                        <h3 class="flex items-center gap-2 text-sm font-semibold mb-2">
                            üìà Top 20 Akumulasi
                            <span id="accumulation-count"
                                class="px-1.5 py-0.5 bg-bgSecondary border border-borderColor rounded text-[10px]">0</span>
                        </h3>
                        <div
                            class="border border-borderColor rounded-lg overflow-hidden h-[400px] overflow-auto flex flex-col">
                            <div class="overflow-auto flex-1 table-wrapper">
                                <table class="w-full text-left min-w-[600px]" id="accumulation-table">
                                    <thead class="bg-bgSecondary sticky top-0 z-10 w-full table-header-group">
                                        <tr>
                                            <th class="table-header">Saham</th>
                                            <th class="table-header text-right">Beli %</th>
                                            <th class="table-header text-right">Nilai Bersih</th>
                                            <th class="table-header text-right">Total Nilai</th>
                                        </tr>
                                    </thead>
                                    <tbody id="accumulation-table-body" class="divide-y divide-borderColor">
                                        <!-- Rows will be injected here -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="accumulation-placeholder"
                                class="p-8 text-center text-textSecondary hidden border-t border-borderColor bg-bgCard">
                                <span class="text-3xl block mb-2 opacity-50">üìà</span>
                                <p>No accumulation data</p>
                            </div>
                        </div>
                    </div>

                    <!-- Distribution Table -->
                    <div>
                        <h3 class="flex items-center gap-2 text-sm font-semibold mb-2">
                            üìâ Top 20 Distribusi
                            <span id="distribution-count"
                                class="px-1.5 py-0.5 bg-bgSecondary border border-borderColor rounded text-[10px]">0</span>
                        </h3>
                        <div
                            class="border border-borderColor rounded-lg overflow-hidden h-[400px] overflow-auto flex flex-col">
                            <div class="overflow-auto flex-1 table-wrapper">
                                <table class="w-full text-left min-w-[600px]" id="distribution-table">
                                    <thead class="bg-bgSecondary sticky top-0 z-10 w-full table-header-group">
                                        <tr>
                                            <th class="table-header">Saham</th>
                                            <th class="table-header text-right">Jual %</th>
                                            <th class="table-header text-right">Nilai Bersih</th>
                                            <th class="table-header text-right">Total Nilai</th>
                                        </tr>
                                    </thead>
                                    <tbody id="distribution-table-body" class="divide-y divide-borderColor">
                                        <!-- Rows will be injected here -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="distribution-placeholder"
                                class="p-8 text-center text-textSecondary hidden border-t border-borderColor bg-bgCard">
                                <span class="text-3xl block mb-2 opacity-50">üìâ</span>
                                <p>No distribution data</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Market Intelligence -->
            <section class="card-base lg:col-span-2">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">üß† Market Intelligence</h2>
                        <p class="text-[10px] text-textSecondary">Real-time market conditions and statistics</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mb-3">
                    <!-- Regime Card -->
                    <div
                        class="bg-bgSecondary border border-borderColor rounded-xl p-6 flex flex-col items-center text-center">
                        <div class="text-xs uppercase tracking-wider text-textMuted font-bold mb-2">KONDISI PASAR</div>
                        <div class="text-2xl font-bold text-accentInfo mb-2" id="intel-regime">STABIL</div>
                        <div class="text-sm text-textSecondary" id="intel-regime-desc">Menganalisis kondisi pasar...
                        </div>
                    </div>

                    <!-- Baseline Stats -->
                    <div class="bg-bgSecondary border border-borderColor rounded-xl p-6 flex flex-col justify-center">
                        <div class="text-xs uppercase tracking-wider text-textMuted font-bold mb-4 text-center">
                            STATISTIK DASAR</div>
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between items-center border-b border-borderColor pb-2">
                                <span class="text-textSecondary">Rata-rata Vol:</span>
                                <strong id="b-avg-vol" class="text-textPrimary">-</strong>
                            </div>
                            <div class="flex justify-between items-center pt-1">
                                <span class="text-textSecondary">Std Dev:</span>
                                <strong id="b-std-dev" class="text-textPrimary">-</strong>
                            </div>
                        </div>
                    </div>

                    <!-- Pressure Bar -->
                    <div class="bg-bgSecondary border border-borderColor rounded-xl p-6 flex flex-col justify-center">
                        <div class="text-xs uppercase tracking-wider text-textMuted font-bold mb-4 text-center">TEKANAN
                            JUAL/BELI</div>
                        <div class="relative h-6 bg-bgCard rounded-full overflow-hidden mb-3">
                            <div class="absolute inset-0 flex">
                                <div id="buy-pressure-fill" class="h-full bg-accentSuccess transition-all duration-500"
                                    style="width: 50%"></div>
                                <div id="sell-pressure-fill" class="h-full bg-accentDanger transition-all duration-500"
                                    style="width: 50%"></div>
                            </div>
                        </div>
                        <div class="flex justify-between text-xs font-bold">
                            <span id="buy-pressure-pct" class="text-accentSuccess">50% BELI</span>
                            <span id="sell-pressure-pct" class="text-accentDanger">50% JUAL</span>
                        </div>
                    </div>
                </div>

                <div class="bg-bgSecondary border border-borderColor rounded-xl p-6">
                    <h4 class="font-bold text-sm mb-4 text-textMuted uppercase tracking-wider">Pola Terkini</h4>
                    <div id="pattern-list" class="space-y-2 max-h-[200px] overflow-y-auto pr-2">
                        <div
                            class="text-sm text-textSecondary italic p-4 text-center bg-bgCard rounded border border-borderColor border-dashed">
                            Menunggu pola...</div>
                    </div>
                </div>
            </section>

            <!-- AI Analysis -->
            <section class="card-base lg:col-span-2">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h2 class="text-sm font-bold mb-0.5">ü§ñ AI Pattern Analysis</h2>
                        <p class="text-[10px] text-textSecondary">Real-time AI-powered pattern detection</p>
                    </div>
                    <div class="px-2 py-0.5 bg-accentInfo/10 text-accentInfo border border-accentInfo/20 rounded text-[10px] font-bold uppercase"
                        id="llm-status">Ready</div>
                </div>

                <div class="flex gap-2 mb-3 overflow-x-auto pb-1 border-b border-borderColor scrollbar-hide">
                    <button
                        class="px-3 py-1.5 text-xs font-semibold rounded-lg bg-bgHover text-textPrimary hover:bg-accentInfo hover:text-white transition-colors tab-btn active whitespace-nowrap"
                        data-type="accumulation">üìà Akumulasi</button>
                    <button
                        class="px-3 py-1.5 text-xs font-semibold rounded-lg bg-bgHover text-textPrimary hover:bg-accentInfo hover:text-white transition-colors tab-btn whitespace-nowrap"
                        data-type="anomalies">‚ö° Anomali</button>
                    <button
                        class="px-3 py-1.5 text-xs font-semibold rounded-lg bg-bgHover text-textPrimary hover:bg-accentInfo hover:text-white transition-colors tab-btn whitespace-nowrap"
                        data-type="timing">‚è∞ Timing</button>
                    <button
                        class="px-3 py-1.5 text-xs font-semibold rounded-lg bg-bgHover text-textPrimary hover:bg-accentInfo hover:text-white transition-colors tab-btn whitespace-nowrap"
                        data-type="symbol">üéØ Symbol</button>
                    <button
                        class="px-3 py-1.5 text-xs font-semibold rounded-lg bg-bgHover text-textPrimary hover:bg-accentInfo hover:text-white transition-colors tab-btn whitespace-nowrap"
                        data-type="custom">‚úçÔ∏è Custom</button>
                </div>

                <div id="symbol-input-container" class="mb-4 hidden">
                    <input type="text" id="symbol-input" class="input-base w-full max-w-sm uppercase"
                        placeholder="Enter stock code (e.g., BBCA)" maxlength="4" />
                </div>

                <!-- Custom Prompt Input -->
                <div id="custom-prompt-container" class="mb-4 hidden space-y-4">
                    <textarea id="custom-prompt-input" class="input-base w-full resize-y h-32"
                        placeholder="Tanyakan apa saja tentang data di database... Contoh: 'Saham mana yang paling banyak akumulasi hari ini?' atau 'Analisis pola BBCA dalam 24 jam terakhir'"></textarea>

                    <div class="flex flex-wrap gap-4">
                        <div class="flex-1 min-w-[200px]">
                            <label class="block text-xs text-textSecondary mb-1">Symbols (opsional):</label>
                            <input type="text" id="custom-symbols-input" class="input-base w-full uppercase"
                                placeholder="e.g., BBCA,TLKM,BMRI" />
                        </div>

                        <div class="flex-1 min-w-[200px]">
                            <label class="block text-xs text-textSecondary mb-1">Include Data:</label>
                            <select id="custom-data-type" class="input-base w-full cursor-pointer">
                                <option value="alerts,regimes">Alerts + Regimes</option>
                                <option value="alerts,regimes,patterns">+ Patterns</option>
                                <option value="alerts,regimes,patterns,signals">+ Signals</option>
                                <option value="alerts">Alerts Only</option>
                                <option value="regimes">Regimes Only</option>
                                <option value="patterns">Patterns Only</option>
                                <option value="signals">Signals Only</option>
                            </select>
                        </div>

                        <div class="w-[100px]">
                            <label class="block text-xs text-textSecondary mb-1">Hours Back:</label>
                            <input type="number" id="custom-hours-input" class="input-base w-full" value="24" min="1"
                                max="168" />
                        </div>
                    </div>
                </div>

                <div id="llm-stream-output"
                    class="p-8 text-center text-textSecondary border border-borderColor border-dashed rounded-lg bg-bgSecondary/30 min-h-[200px] flex flex-col items-center justify-center prose prose-invert max-w-none">
                    <div class="flex flex-col items-center">
                        <span class="text-4xl mb-4 opacity-70">üß†</span>
                        <p class="font-medium">Click "Start Analysis" to begin AI real-time analysis</p>
                    </div>
                </div>

                <div class="mt-4 flex gap-3">
                    <button id="start-analysis-btn" class="btn-primary">
                        <span>‚ñ∂</span> Start Analysis
                    </button>
                    <button id="stop-analysis-btn" class="btn-secondary hidden">
                        <span>‚èπ</span> Stop
                    </button>
                </div>
            </section>

        </div>
    </main>

    <!-- Help Modal -->
    <div id="help-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <!-- Overlay -->
            <div class="fixed inset-0 bg-black/75 transition-opacity" aria-hidden="true" id="help-modal-overlay"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <!-- Modal Content -->
            <div
                class="inline-block align-bottom bg-bgCard rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full border border-borderColor">
                <div class="bg-bgCard px-6 pt-6 pb-4">
                    <div class="flex justify-between items-center mb-6 border-b border-borderColor pb-4">
                        <h3 class="text-xl font-bold text-textPrimary" id="modal-title">üéØ Panduan Whale Radar</h3>
                        <button
                            class="modal-close text-textSecondary hover:text-textPrimary focus:outline-none text-2xl"
                            id="modal-close">&times;</button>
                    </div>

                    <div class="modal-body text-sm text-textSecondary space-y-6 max-h-[60vh] overflow-y-auto pr-2">
                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">üìñ Apa itu Whale Radar?</h3>
                            <p>Dashboard real-time yang memantau transaksi saham besar ("whale" / ikan paus) di pasar
                                modal Indonesia.
                                Sistem ini mendeteksi aktivitas fund besar yang bisa menjadi indikator pergerakan harga.
                            </p>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">‚ö° Running Trade</h3>
                            <p>Feed transaksi real-time yang menayangkan setiap transaksi yang terjadi di bursa.</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong class="text-textPrimary">Real-time</strong>: Data streaming langsung tanpa
                                    delay.</li>
                                <li><strong class="text-textPrimary">Filter Otomatis</strong>: Menampilkan transaksi
                                    yang relevan.</li>
                                <li><strong class="text-textPrimary">Indikator Warna</strong>: <span
                                        class="text-accentSuccess">Hijau (HAKA)</span> untuk pembelian di offer, <span
                                        class="text-accentDanger">Merah (HAKI)</span> untuk penjualan di bid.</li>
                            </ul>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">üêã Whale Alerts Feed</h3>
                            <div class="space-y-2">
                                <div>
                                    <strong class="text-textPrimary text-xs uppercase tracking-wider">Kriteria
                                        Deteksi</strong>
                                    <ul class="list-disc pl-5 space-y-1 mt-1">
                                        <li><strong class="text-textPrimary">Nominal Besar</strong>: Transaksi > Rp 1
                                            Milyar per trade.</li>
                                        <li><strong class="text-textPrimary">Anomali Statistik</strong>: Transaksi > Rp
                                            100 Juta dengan Z-Score tinggi (>3.0) atau Volume Spike (>5x rata-rata).
                                        </li>
                                    </ul>
                                </div>
                                <div>
                                    <strong class="text-textPrimary text-xs uppercase tracking-wider">Cara
                                        Kerja</strong>
                                    <p class="text-sm mt-1">
                                        Sistem memindai setiap transaksi yang masuk di Running Trade secara
                                        <strong>real-time</strong>.
                                        Jika sebuah transaksi memenuhi kriteria di atas, sistem langsung menangkapnya
                                        sebagai "Whale Alert" dan menampilkannya di feed ini dalam hitungan milidetik.
                                        Ini menangkap momentum agresif saat big boss sedang HAKA (Membeli) atau HAKI
                                        (Menjual).
                                    </p>
                                </div>
                            </div>
                            <div class="mt-2 text-xs bg-bgSecondary p-2 rounded border border-borderColor">
                                <span class="font-bold text-textPrimary">Filter Tersedia:</span> Simbol, Aksi
                                (Buy/Sell), Nilai Minimum, dan Tipe Board (RG/TN/NG).
                            </div>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">üìä Aktivitas Bandar (24h)</h3>
                            <p>Peringkat saham berdasarkan akumulasi/distribusi dana bandar dalam 24 jam terakhir.</p>
                            <div class="grid grid-cols-1 gap-2 mt-2">
                                <div class="p-2 bg-bgSecondary rounded border border-borderColor">
                                    <strong class="text-accentSuccess block mb-1">üìà Akumulasi (Accumulation)</strong>
                                    <ul class="list-disc pl-4 text-xs space-y-1">
                                        <li>Dominasi Beli (>55% transaksi adalah BUY/HAKA).</li>
                                        <li>Net Value Positif (Total Beli > Total Jual).</li>
                                        <li>Menandakan bandar sedang mengumpulkan barang secara agresif.</li>
                                    </ul>
                                </div>
                                <div class="p-2 bg-bgSecondary rounded border border-borderColor">
                                    <strong class="text-accentDanger block mb-1">üìâ Distribusi (Distribution)</strong>
                                    <ul class="list-disc pl-4 text-xs space-y-1">
                                        <li>Dominasi Jual (>55% transaksi adalah SELL/HAKI).</li>
                                        <li>Net Value Negatif (Total Jual > Total Beli).</li>
                                        <li>Menandakan bandar sedang membuang barang atau taking profit.</li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">üíº Posisi & Riwayat Trading</h3>
                            <p>Simulasi strategi trading otomatis berdasarkan sinyal AI:</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong class="text-textPrimary">Posisi Aktif</strong>: Saham yang sedang dipegang
                                    oleh sistem saat ini.</li>
                                <li><strong class="text-textPrimary">Riwayat</strong>: Catatan trade yang sudah selesai
                                    (Win/Loss).</li>
                                <li><strong class="text-textPrimary">P&L</strong>: Profit & Loss dihitung real-time
                                    berdasarkan harga pasar terakhir.</li>
                            </ul>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">üéØ Strategi Trading</h3>
                            <div class="space-y-2">
                                <div>
                                    <strong class="text-accentInfo">üöÄ Volume Breakout</strong>
                                    <p class="text-xs text-textSecondary">Mendeteksi lonjakan harga yang disertai dengan
                                        volume tinggi, mengindikasikan awal tren baru yang kuat.</p>
                                </div>
                                <div>
                                    <strong class="text-accentWarning">‚Ü©Ô∏è Mean Reversion</strong>
                                    <p class="text-xs text-textSecondary">Mencari saham yang harganya menyimpang jauh
                                        dari rata-rata (overbought/oversold) dan berpotensi kembali ke harga wajar.</p>
                                </div>
                                <div>
                                    <strong class="text-purple-400">üõ°Ô∏è Fakeout Filter</strong>
                                    <p class="text-xs text-textSecondary">Mengidentifikasi breakout palsu di mana harga
                                        menembus resistance tetapi gagal bertahan, seringkali menjebak trader retail.
                                    </p>
                                </div>
                            </div>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">üß† Market Intelligence</h3>
                            <p>Fitur ini memberikan gambaran kondisi pasar secara keseluruhan:</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong class="text-textPrimary">Kondisi Pasar</strong>: Status tren pasar saat ini
                                    (Bullish, Bearish, Ranging).</li>
                                <li><strong class="text-textPrimary">Tekanan Jual/Beli</strong>: Perbandingan volume
                                    order beli vs jual secara real-time.</li>
                            </ul>
                        </section>

                        <section class="space-y-2">
                            <h3 class="text-base font-bold text-textPrimary">ü§ñ AI Pattern Analysis</h3>
                            <p>Analisis pola grafik otomatis menggunakan kecerdasan buatan:</p>
                            <ul class="list-disc pl-5 space-y-1">
                                <li><strong class="text-textPrimary">Akumulasi</strong>: Mendeteksi pola pembelian
                                    bertahap oleh bandar.</li>
                                <li><strong class="text-textPrimary">Anomali</strong>: Menemukan pergerakan harga atau
                                    volume yang tidak wajar.</li>
                                <li><strong class="text-textPrimary">Tanya Data</strong>: Gunakan fitur "Custom"
                                    untuk bertanya langsung ke database menggunakan bahasa alami.</li>
                            </ul>
                        </section>
                    </div>
                </div>
                <div class="bg-bgSecondary px-6 py-4 flex flex-row-reverse border-t border-borderColor">
                    <button type="button" class="btn-primary" id="modal-got-it">Mengerti!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Webhook Modal -->
    <div id="webhook-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="webhook-modal-title" role="dialog"
        aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-black/75 transition-opacity" aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>

            <div
                class="inline-block align-bottom bg-bgCard rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full border border-borderColor">
                <div class="bg-bgCard px-6 pt-6 pb-4">
                    <div class="flex justify-between items-center mb-6 border-b border-borderColor pb-4">
                        <h3 class="text-xl font-bold text-textPrimary">üîî Konfigurasi Webhook</h3>
                        <button class="text-textSecondary hover:text-textPrimary focus:outline-none text-2xl"
                            id="webhook-modal-close">&times;</button>
                    </div>

                    <div class="space-y-6">
                        <!-- List Section -->
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <h4 class="text-sm font-bold text-textSecondary uppercase tracking-wider">Active
                                    Webhooks</h4>
                                <button id="add-webhook-btn" class="btn-primary text-xs py-1.5 px-3">
                                    ‚ûï Add New
                                </button>
                            </div>

                            <div class="border border-borderColor rounded-lg overflow-hidden">
                                <table class="w-full text-left min-w-[600px]">
                                    <thead class="bg-bgSecondary">
                                        <tr>
                                            <th class="px-4 py-2 text-xs font-semibold text-textMuted uppercase">Name
                                            </th>
                                            <th class="px-4 py-2 text-xs font-semibold text-textMuted uppercase">URL
                                            </th>
                                            <th class="px-4 py-2 text-xs font-semibold text-textMuted uppercase">Status
                                            </th>
                                            <th
                                                class="px-4 py-2 text-xs font-semibold text-textMuted uppercase text-right">
                                                Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="webhook-list-body" class="divide-y divide-borderColor text-sm">
                                        <!-- Rows injected via JS -->
                                    </tbody>
                                </table>
                                <div id="webhook-loading" class="p-4 text-center text-textSecondary hidden">
                                    <div
                                        class="inline-block animate-spin h-4 w-4 border-2 border-borderColor border-t-accentInfo rounded-full mr-2">
                                    </div>
                                    Loading...
                                </div>
                                <div id="webhook-placeholder" class="p-8 text-center text-textMuted text-sm">
                                    No webhooks configured
                                </div>
                            </div>
                        </div>

                        <!-- Form Section -->
                        <div id="webhook-form-section"
                            class="hidden bg-bgSecondary/50 p-4 rounded-lg border border-borderColor border-dashed">
                            <h4 class="text-sm font-bold text-textPrimary mb-4" id="webhook-form-title">Add New Webhook
                            </h4>
                            <form id="webhook-form" class="space-y-4">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs text-textSecondary mb-1">Name</label>
                                        <input type="text" id="webhook-name" class="input-base w-full"
                                            placeholder="e.g. Discord Alerts" required>
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="block text-xs text-textSecondary mb-1">Webhook URL</label>
                                        <input type="url" id="webhook-url" class="input-base w-full"
                                            placeholder="https://discord.com/api/webhooks/..." required>
                                    </div>
                                </div>

                                <div class="flex items-center gap-2">
                                    <input type="checkbox" id="webhook-enabled"
                                        class="rounded bg-bgCard border-borderColor text-accentInfo focus:ring-accentInfo"
                                        checked>
                                    <label for="webhook-enabled" class="text-sm text-textPrimary">Enable this
                                        webhook</label>
                                </div>

                                <div class="flex gap-2 justify-end pt-2">
                                    <button type="button" id="cancel-webhook-btn"
                                        class="btn-secondary text-xs">Cancel</button>
                                    <button type="submit" id="save-webhook-btn" class="btn-primary text-xs">Save
                                        Webhook</button>
                                </div>
                            </form>
                        </div>

                        <div class="bg-bgSecondary/30 p-3 rounded text-xs text-textSecondary">
                            <p class="mb-1 font-bold">üîî How it works:</p>
                            <p>Webhooks allow you to receive real-time notifications for whale alerts and strategy
                                signals directly to your Discord, Slack, or Telegram.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Candle Details Modal -->
    <div id="candle-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="candle-modal-title" role="dialog"
        aria-modal="true">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity" aria-hidden="true"
            id="candle-modal-overlay"></div>

        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-bgCard border border-borderColor text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl"
                    onclick="event.stopPropagation()">
                    <!-- Header -->
                    <div class="flex items-center justify-between p-4 border-b border-borderColor bg-bgSecondary/30">
                        <h3 id="candle-modal-title" class="text-lg font-bold text-textPrimary">üìâ Market Details</h3>
                        <button type="button" id="candle-modal-close"
                            class="text-textSecondary hover:text-textPrimary transition-colors rounded p-1 hover:bg-white/5">
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>

                    <div class="p-6">
                        <!-- Timeframe Tabs -->
                        <div class="flex flex-wrap gap-2 mb-6 border-b border-borderColor">
                            <button
                                class="c-tab px-4 py-2 text-sm font-medium text-textSecondary hover:text-textPrimary border-b-2 border-transparent transition-colors active"
                                data-timeframe="5m">5 Min</button>
                            <button
                                class="c-tab px-4 py-2 text-sm font-medium text-textSecondary hover:text-textPrimary border-b-2 border-transparent transition-colors"
                                data-timeframe="15m">15 Min</button>
                            <button
                                class="c-tab px-4 py-2 text-sm font-medium text-textSecondary hover:text-textPrimary border-b-2 border-transparent transition-colors"
                                data-timeframe="1h">1 Hour</button>
                            <button
                                class="c-tab px-4 py-2 text-sm font-medium text-textSecondary hover:text-textPrimary border-b-2 border-transparent transition-colors"
                                data-timeframe="1d">Daily</button>
                        </div>

                        <!-- Candle Table -->
                        <div class="overflow-x-auto table-wrapper max-h-[500px] border border-borderColor rounded-lg">
                            <table class="min-w-[700px] divide-y divide-borderColor">
                                <thead class="bg-bgSecondary sticky top-0 z-10">
                                    <tr>
                                        <th scope="col"
                                            class="py-3 px-4 text-left text-xs font-medium text-textSecondary uppercase tracking-wider">
                                            Time</th>
                                        <th scope="col"
                                            class="py-3 px-4 text-right text-xs font-medium text-textSecondary uppercase tracking-wider">
                                            Open</th>
                                        <th scope="col"
                                            class="py-3 px-4 text-right text-xs font-medium text-textSecondary uppercase tracking-wider">
                                            High</th>
                                        <th scope="col"
                                            class="py-3 px-4 text-right text-xs font-medium text-textSecondary uppercase tracking-wider">
                                            Low</th>
                                        <th scope="col"
                                            class="py-3 px-4 text-right text-xs font-medium text-textSecondary uppercase tracking-wider">
                                            Close</th>
                                        <th scope="col"
                                            class="py-3 px-4 text-right text-xs font-medium text-textSecondary uppercase tracking-wider">
                                            Volume</th>
                                    </tr>
                                </thead>
                                <tbody id="candle-list-body"
                                    class="bg-bgCard divide-y divide-borderColor text-sm text-textPrimary">
                                    <!-- JS injected rows -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Followup Analysis Modal -->
    <div id="followup-modal" class="fixed inset-0 z-[100] hidden" aria-labelledby="followup-modal-title" role="dialog"
        aria-modal="true">
        <div class="fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity" aria-hidden="true"></div>

        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-bgCard border border-borderColor text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl"
                    onclick="event.stopPropagation()">
                    <!-- Header -->
                    <div class="flex items-center justify-between p-4 border-b border-borderColor bg-bgSecondary/30">
                        <div>
                            <h3 class="text-lg font-bold text-textPrimary">üêã Whale Followup Analysis</h3>
                            <div class="flex items-center gap-2 text-sm text-textSecondary mt-1">
                                <span id="followup-symbol" class="font-bold text-accentInfo text-base">CODE</span>
                                <span class="text-xs">‚Ä¢</span>
                                <span>Trigger: <span id="followup-trigger-price" class="font-mono text-textPrimary">Rp
                                        0</span></span>
                            </div>
                        </div>
                        <button type="button" id="followup-close"
                            class="text-textSecondary hover:text-textPrimary transition-colors rounded p-1 hover:bg-white/5">
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>

                    <div id="followup-data" class="p-6 max-h-[70vh] overflow-y-auto w-full">
                        <!-- Content injected by JS -->
                        <div class="flex justify-center p-8">
                            <div
                                class="animate-spin h-8 w-8 border-4 border-borderColor border-t-accentInfo rounded-full">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-textSecondary text-sm border-t border-borderColor mt-8">
        <p>Whale Analysis System &copy; 2025</p>
    </footer>

    <script type="module" src="js/app.js?v=15"></script>
</body>

</html>